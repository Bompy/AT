"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Promise=require("bluebird"),nodemailer=require("nodemailer"),NodeMailer=function(){return function(e,r,t,i){var n=this;this.events=e,this.checkThrow=r,this.sendingAddress=t,this.password=i,this.sendEmail=function(e,r,t,i,s){return void 0===s&&(s=!1),n.checkThrow(s).then(function(s){return new Promise(function(s,o){var a={from:e,to:r,subject:t,html:i};n.transporter.sendMail(a,function(a,d){a?o(a):(new Promise(function(s,o){n.events.emailSent({from:e,to:r,subject:t,html:i}),s()}),s())})})}).catch(function(s){return new Promise(function(o,a){n.events.sendEmailFailed({from:e,to:r,subject:t,html:i,reason:s}),o()}),Promise.reject({identifier:"SendEmailFailed",data:{reason:s}})})},this.transporter=nodemailer.createTransport({service:"gmail",auth:{user:this.sendingAddress,pass:this.password}})}}();exports.default=NodeMailer;