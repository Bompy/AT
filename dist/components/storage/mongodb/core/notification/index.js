"use strict";function makeConditions(e){return new Promise(function(r,s){var a={};e.user&&(e.user.userId&&(a["user.userId"]=mongoose.Types.ObjectId(e.user.userId)),e.user.emailAddress&&(a["user.emailAddress"]=e.user.emailAddress),e.user.fullName&&(a["user.fullName"]=e.user.fullName)),e.type&&(a.type=e.type),e.app&&(a.app=e.app),e.label&&(a.label=e.label),e.seen&&(a.seen=e.seen),e.cleared&&(a.cleared=e.cleared),e.textSearch&&(a.$text={$search:e.textSearch}),r(a)})}function makeSortCriteria(e){return new Promise(function(r,s){var a;a=e.criteria,"Descending"===e.order&&(a="-"+a),r(a)})}function generateAddDetails(e){var r=[];return e.forEach(function(e){var s={user:{userId:mongoose.Types.ObjectId(e.user.userId),emailAddress:e.user.emailAddress},type:e.type,app:e.app,label:e.label,seen:e.seen,cleared:e.cleared};e.user.fullName&&(s.user.fullName=e.user.fullName),r.push()}),r}function generateUpdateDetails(e,r){return new Promise(function(s,a){r.user&&(r.user.userId&&(e.user.userId=mongoose.Types.ObjectId(r.user.userId)),r.user.emailAddress&&(e.user.emailAddress=r.user.emailAddress),r.user.fullName&&(e.user.fullName=r.user.fullName)),r.type&&(e.type=r.type),r.app&&(e.app=r.app),r.label&&(e.label=r.label),r.seen&&(e.seen=r.seen),r.cleared&&(e.cleared=r.cleared),s(e)})}function convertToAbstract(e,r){return void 0===r&&(r=!1),this.checkThrow(r).then(function(r){return new Promise(function(r,s){var a=[];e.forEach(function(e){var r={id:e._id.toHexString(),user:{userId:e.user.userId.toHexString(),emailAddress:e.user.emailAddress},type:e.type,app:e.app,label:e.label,seen:e.seen,cleared:e.cleared,createdAt:e.createdAt,updatedAt:e.updatedAt};e.user.fullName&&(r.user.fullName=e.user.fullName),a.push(r)}),r(a)})})}Object.defineProperty(exports,"__esModule",{value:!0});var Promise=require("bluebird"),mongoose=require("mongoose"),generic_model_class_1=require("../../generic-model-class"),generic_event_class_1=require("../../generic-event-class"),model_1=require("./model");exports.default=function(e,r,s){var a=new generic_event_class_1.default(e,"Core|Notification");return new generic_model_class_1.default(a,model_1.MongooseModel,r,s,makeConditions,makeSortCriteria,generateAddDetails,generateUpdateDetails,convertToAbstract)};