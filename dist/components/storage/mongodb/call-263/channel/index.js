"use strict";function makeConditions(e){return new Promise(function(o,a){var t={};e.allocated&&(t.allocated=e.allocated),e.allocatedTo&&(t.allocatedTo=mongoose.Types.ObjectId(e.allocatedTo)),e.code&&(t.code=e.code),e.phoneNumber&&(t.phoneNumber=e.phoneNumber),e.password&&(t.password=e.password),e.textSearch&&(t.$text={$search:e.textSearch}),o(t)})}function makeSortCriteria(e){return new Promise(function(o,a){var t;t=e.criteria,"Descending"===e.order&&(t="-"+t),o(t)})}function generateAddDetails(e){var o=[];return e.forEach(function(e){var a={allocated:e.allocated,allocatedTo:mongoose.Types.ObjectId(e.allocatedTo),code:e.code,phoneNumber:e.phoneNumber,password:e.password};o.push(a)}),o}function generateUpdateDetails(e,o){return new Promise(function(a,t){o.allocated&&(e.allocated=o.allocated),o.allocatedTo&&(e.allocatedTo=mongoose.Types.ObjectId(o.allocatedTo)),o.code&&(e.code=o.code),o.phoneNumber&&(e.phoneNumber=o.phoneNumber),o.password&&(e.password=o.password),a(e)})}function convertToAbstract(e,o){return void 0===o&&(o=!1),this.checkThrow(o).then(function(o){return new Promise(function(o,a){var t=[];e.forEach(function(e){var o={id:e._id.toHexString(),allocated:e.allocated,allocatedTo:e.allocatedTo.toHexString(),code:e.code,phoneNumber:e.phoneNumber,password:e.password,createdAt:e.createdAt,updatedAt:e.updatedAt};t.push(o)}),o(t)})})}Object.defineProperty(exports,"__esModule",{value:!0});var Promise=require("bluebird"),mongoose=require("mongoose"),generic_model_class_1=require("../../generic-model-class"),generic_event_class_1=require("../../generic-event-class"),model_1=require("./model");exports.default=function(e,o,a){var t=new generic_event_class_1.default(e,"Call263|Channel");return new generic_model_class_1.default(t,model_1.MongooseModel,o,a,makeConditions,makeSortCriteria,generateAddDetails,generateUpdateDetails,convertToAbstract)};