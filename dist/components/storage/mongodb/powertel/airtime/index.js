"use strict";function makeConditions(e){return new Promise(function(n,t){var a={};e.checkpoint&&(a.checkpoint={},e.checkpoint.min&&(a.checkpoint.$gte=e.checkpoint.min),e.checkpoint.max&&(a.checkpoint.$lte=e.checkpoint.max)),e.newStockValue&&(a.newStockValue={},e.newStockValue.min&&(a.newStockValue.$gte=e.newStockValue.min),e.newStockValue.max&&(a.newStockValue.$lte=e.newStockValue.max)),e.amountSold&&(a.amountSold={},e.amountSold.min&&(a.amountSold.$gte=e.amountSold.min),e.amountSold.max&&(a.amountSold.$lte=e.amountSold.max)),e.balance&&(a.balance={},e.balance.min&&(a.balance.$gte=e.balance.min),e.balance.max&&(a.balance.$lte=e.balance.max)),e.textSearch&&(a.$text={$search:e.textSearch}),n(a)})}function makeSortCriteria(e){return new Promise(function(n,t){var a;a=e.criteria,"Descending"===e.order&&(a="-"+a),n(a)})}function generateAddDetails(e){var n=[];return e.forEach(function(e){var t={checkpoint:e.checkpoint,newStockValue:e.newStockValue,amountSold:e.amountSold,balance:e.balance};n.push(t)}),n}function generateUpdateDetails(e,n){return new Promise(function(t,a){n.checkpoint&&(e.checkpoint=n.checkpoint),n.newStockValuePlus&&(e.newStockValue+=n.newStockValuePlus),n.newStockValueMinus&&(e.newStockValue-=n.newStockValueMinus),n.newStockValue&&(e.newStockValue=n.newStockValue),n.amountSoldPlus&&(e.amountSold+=n.amountSoldPlus),n.amountSoldMinus&&(e.amountSold-=n.amountSoldMinus),n.amountSold&&(e.amountSold=n.amountSold),n.balancePlus&&(e.balance+=n.balancePlus),n.balanceMinus&&(e.balance-=n.balanceMinus),n.balance&&(e.balance=n.balance),t(e)})}function convertToAbstract(e,n){return void 0===n&&(n=!1),this.checkThrow(n).then(function(n){return new Promise(function(n,t){var a=[];e.forEach(function(e){var n={id:e._id.toHexString(),checkpoint:e.checkpoint,newStockValue:e.newStockValue,amountSold:e.amountSold,balance:e.balance,createdAt:e.createdAt,updatedAt:e.updatedAt};a.push(n)}),n(a)})})}Object.defineProperty(exports,"__esModule",{value:!0});var Promise=require("bluebird"),generic_model_class_1=require("../../generic-model-class"),generic_event_class_1=require("../../generic-event-class"),model_1=require("./model");exports.default=function(e,n,t){var a=new generic_event_class_1.default(e,"Powertel|Airtime");return new generic_model_class_1.default(a,model_1.MongooseModel,n,t,makeConditions,makeSortCriteria,generateAddDetails,generateUpdateDetails,convertToAbstract)};