"use strict";function makeConditions(n){return new Promise(function(e,t){var a={};n.mdnRange&&(n.mdnRange.min&&(a["mdnRange.min"]={},n.mdnRange.min.min&&(a["mdnRange.min"].$gte=n.mdnRange.min.min),n.mdnRange.min.max&&(a["mdnRange.min"].$lte=n.mdnRange.min.max)),n.mdnRange.min&&(a["mdnRange.min"]={},n.mdnRange.max.min&&(a["mdnRange.max"].$gte=n.mdnRange.max.min),n.mdnRange.max.max&&(a["mdnRange.max"].$lte=n.mdnRange.max.max))),n.initialCount&&(a.initialCount={},n.initialCount.min&&(a.initialCount.$gte=n.initialCount.min),n.initialCount.max&&(a.initialCount.$lte=n.initialCount.max)),n.newCount&&(a.newCount={},n.newCount.min&&(a.newCount.$gte=n.newCount.min),n.newCount.max&&(a.newCount.$lte=n.newCount.max)),n.amount&&(a.amount={},n.amount.min&&(a.amount.$gte=n.amount.min),n.amount.max&&(a.amount.$lte=n.amount.max)),n.textSearch&&(a.$text={$search:n.textSearch}),e(a)})}function makeSortCriteria(n){return new Promise(function(e,t){var a;a=n.criteria,"Descending"===n.order&&(a="-"+a),e(a)})}function generateAddDetails(n){var e=[];return n.forEach(function(n){var t={initialCount:n.initialCount,newCount:n.newCount,amount:n.amount};n.mdnRange&&(t.mdnRange={min:n.mdnRange.min,max:n.mdnRange.max}),e.push(t)}),e}function generateUpdateDetails(n,e){return new Promise(function(t,a){e.mdnRange&&(e.mdnRange.min&&(n.mdnRange.min=e.mdnRange.min),e.mdnRange.max&&(n.mdnRange.max=e.mdnRange.max)),e.initialCount&&(n.initialCount=e.initialCount),e.newCount&&(n.newCount=e.newCount),e.amount&&(n.amount=e.amount),t(n)})}function convertToAbstract(n,e){return void 0===e&&(e=!1),this.checkThrow(e).then(function(e){return new Promise(function(e,t){var a=[];n.forEach(function(n){var e={id:n._id.toHexString(),initialCount:n.initialCount,newCount:n.newCount,amount:n.amount,createdAt:n.createdAt,updatedAt:n.updatedAt};n.mdnRange&&(e.mdnRange={min:n.mdnRange.min,max:n.mdnRange.max}),a.push(e)}),e(a)})})}Object.defineProperty(exports,"__esModule",{value:!0});var Promise=require("bluebird"),generic_model_class_1=require("../../generic-model-class"),generic_event_class_1=require("../../generic-event-class"),model_1=require("./model");exports.default=function(n,e,t){var a=new generic_event_class_1.default(n,"Powertel|NewCardStock");return new generic_model_class_1.default(a,model_1.MongooseModel,e,t,makeConditions,makeSortCriteria,generateAddDetails,generateUpdateDetails,convertToAbstract)};