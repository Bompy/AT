"use strict";function makeConditions(e){return new Promise(function(n,a){var t={};e.initialBalance&&(t.initialBalance={},e.initialBalance.min&&(t.initialBalance.$gte=e.initialBalance.min),e.initialBalance.max&&(t.initialBalance.$lte=e.initialBalance.max)),e.newBalance&&(t.newBalance={},e.newBalance.min&&(t.newBalance.$gte=e.newBalance.min),e.newBalance.max&&(t.newBalance.$lte=e.newBalance.max)),e.amount&&(t.amount={},e.amount.min&&(t.amount.$gte=e.amount.min),e.amount.max&&(t.amount.$lte=e.amount.max)),e.textSearch&&(t.$text={$search:e.textSearch}),n(t)})}function makeSortCriteria(e){return new Promise(function(n,a){var t;t=e.criteria,"Descending"===e.order&&(t="-"+t),n(t)})}function generateAddDetails(e){var n=[];return e.forEach(function(e){var a={initialBalance:e.initialBalance,newBalance:e.newBalance,amount:e.amount};n.push(a)}),n}function generateUpdateDetails(e,n){return new Promise(function(a,t){n.initialBalance&&(e.initialBalance=n.initialBalance),n.newBalance&&(e.newBalance=n.newBalance),n.amount&&(e.amount=n.amount),a(e)})}function convertToAbstract(e,n){return void 0===n&&(n=!1),this.checkThrow(n).then(function(n){return new Promise(function(n,a){var t=[];e.forEach(function(e){var n={id:e._id.toHexString(),initialBalance:e.initialBalance,newBalance:e.newBalance,amount:e.amount,createdAt:e.createdAt,updatedAt:e.updatedAt};t.push(n)}),n(t)})})}Object.defineProperty(exports,"__esModule",{value:!0});var Promise=require("bluebird"),generic_model_class_1=require("../../generic-model-class"),generic_event_class_1=require("../../generic-event-class"),model_1=require("./model");exports.default=function(e,n,a){var t=new generic_event_class_1.default(e,"Powertel|NewAirtimeStock");return new generic_model_class_1.default(t,model_1.MongooseModel,n,a,makeConditions,makeSortCriteria,generateAddDetails,generateUpdateDetails,convertToAbstract)};