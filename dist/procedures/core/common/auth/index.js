"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Promise=require("bluebird"),Auth=function(){return function(e,t,r,i){var n=this;this.events=e,this.checkThrow=t,this.cleanUsers=r,this.authSignIn=i,this.signIn=function(e,t,r,i){return void 0===i&&(i=!1),n.checkThrow(i).then(function(i){return n.authSignIn(e,t,r)}).then(function(e){return n.cleanUsers([e])}).then(function(e){return Promise.resolve(e[0])}).catch(function(e){return e&&"UserNotFound"===e.identifier?Promise.reject(e):e&&"NotVerified"===e.identifier?Promise.reject(e):e&&"InvalidPassword"===e.identifier?Promise.reject(e):Promise.reject({identifier:"SignInFailed",data:{reason:e}})})}}}();exports.default=Auth;