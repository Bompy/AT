<div flex="100" layout="column" layout-align="start stretch" class="screen" ng-cloak>
  <tool-bar-widget title="Product Details"></tool-bar-widget>
  <md-progress-linear class="md-accent" ng-if="$ctrl.loading" md-mode="indeterminate"></md-progress-linear>
  <md-content flex layout="row" layout-align="center stretch" layout-padding>

    <div layout="column" layout-align="start stretch" class="no_padding">
      <side-nav-widget context="profile" flex="100" layout="row" layout-align="center stretch" class="no_padding"></side-nav-widget>
    </div>

    <md-content flex-gt-sm="80" flex-sm="90" flex-xs="100" layout-padding>

      <section layout="column" layout-align="start stretch">

        <md-subheader class="md-no-sticky">{{ $ctrl.product.label }}</md-subheader>

        <div ng-hide="$ctrl.product || $ctrl.loading" layout="row" layout-align="center center">
          <h1 class="md-subhead">Couldn't get details</h1>
        </div>

        <div ng-show="$ctrl.errorMessage" layout="row" layout-align="center center">
          <h1 class="md-subhead">{{ $ctrl.errorMessage }}</h1>
        </div>

        <md-card ng-hide="$ctrl.loading" ng-if="$ctrl.product.id">

          <md-card-title>
            <md-card-title-text>
              <span class="md-headline">{{ $ctrl.product.label }}</span>
              <span class="md-subhead">Updated on {{ $ctrl.product.updatedAt | date }}</span>
            </md-card-title-text>
          </md-card-title>

          <md-card-content layout-padding>

            <p class="md-body-1">
              Effective Price: {{ $ctrl.product.effectivePrice.price | currency }}
            </p>

            <p>
              <span class="md-body-1">Min Price: {{ $ctrl.product.priceValues.min.price  | currency }}</span><br>
              <span class="md-body-1">Max Price: {{ $ctrl.product.priceValues.max.price  | currency }}</span><br>
              <span class="md-body-1">Median Price: {{ $ctrl.product.priceValues.median.price  | currency }}</span><br>
              <span class="md-body-1">Mean Price: {{ $ctrl.product.priceValues.mean.price  | currency }}</span>
            </p>

            <div layout="column" layout-align="start start">

              <span class="md-body-2">Prices</span>

              <span class="md-body-1" ng-if="!$ctrl.product.prices.length">-No prices yet-</span>

              <md-list class="md-dense" ng-if="$ctrl.product.prices.length">

                <md-list-item class="md-3-line" ng-repeat="price in $ctrl.product.prices">
                  <div class="md-list-item-text" layout="column">
                    <h3>{{ price.shop.shopName }}</h3>
                    <h4>{{ ( price.price ) | currency }}</h4>
                    <p>for {{ price.quantity }}</p>
                  </div>
                </md-list-item>

              </md-list>

            </div>

          </md-card-content>

          <md-card-actions layout="row" layout-align="end center">
            <md-button class="md-icon-button md-accent" ng-disabled="$ctrl.loading || $ctrl.deleting" aria-label="Button" ng-href="#/add-edit-product/{{ $ctrl.product.id }}">
              <md-icon class="material-icons step" aria-label="icon">edit</md-icon>
              <md-tooltip md-direction="bottom">Edit Details</md-tooltip>
            </md-button>
            <md-button ng-disabled="$ctrl.loading || $ctrl.deleting" class="md-icon-button md-accent" ng-click="$ctrl.deleteProduct()">
              <md-icon ng-hide="$ctrl.deleting" class="material-icons step" aria-label="icon">delete</md-icon>
              <md-icon ng-show="$ctrl.deleting" class="material-icons step" aria-label="icon">more_horiz</md-icon>
              <md-tooltip md-direction="bottom">Delete</md-tooltip>
            </md-button>
          </md-card-actions>

        </md-card>

      </section>

      <div layout="row" layout-align="center end" layout-padding>
        <span class="md-caption">Copyright Â© 2017 Athena Resources Limited. All rights reserved.</span>
      </div>

    </md-content>

  </md-content>
</div>