<div flex="100" layout="column" layout-align="start stretch" class="screen" ng-cloak>
  <tool-bar-widget title="Round Details"></tool-bar-widget>
  <md-progress-linear class="md-accent" ng-if="$ctrl.loading" md-mode="indeterminate"></md-progress-linear>
  <md-content flex layout="row" layout-align="center stretch" layout-padding>

    <div layout="column" layout-align="start stretch" class="no_padding">
      <side-nav-widget context="profile" flex="100" layout="row" layout-align="center stretch" class="no_padding"></side-nav-widget>
    </div>

    <md-content flex-gt-sm="80" flex-sm="90" flex-xs="100">

      <section>

        <md-subheader class="md-no-sticky">{{ $ctrl.round.roundName }}</md-subheader>

        <div ng-show="$ctrl.errorMessage" layout="row" layout-align="center center">
          <h1 class="md-subhead">{{ $ctrl.errorMessage }}</h1>
        </div>

        <md-card flex="100" ng-hide="$ctrl.loading" ng-if="$ctrl.round.id">

          <md-card-header>
            <md-card-avatar>
              <img class="md-user-avatar" src="/resources/drawable/bg2.jpg">
            </md-card-avatar>
            <md-card-header-text>
              <span class="md-title" ng-show="$ctrl.round.inProgress">Active</span>
              <span class="md-title" ng-hide="$ctrl.round.inProgress">Inactive</span>
              <span class="md-subhead" ng-show="$ctrl.round.duration.months != 1">Spanning {{ $ctrl.round.duration.months }} months</span>
              <span class="md-subhead" ng-show="$ctrl.round.duration.months == 1">Spanning 1 month</span>
            </md-card-header-text>
          </md-card-header>

          <md-card-title>
            <md-card-title-text>
              <span class="md-headline">{{ $ctrl.round.roundName }}</span>
              <span class="md-subhead">Updated on {{ $ctrl.round.updatedAt | date }}</span>
            </md-card-title-text>
          </md-card-title>

          <md-card-actions layout="row" layout-align="start center">
            <md-button class="md-accent" ng-disabled="$ctrl.loading || $ctrl.deleting" aria-label="Button" ng-href="#/add-edit-round/{{ $ctrl.round.id }}">
              <span>Edit Round Details</span>
            </md-button>
          </md-card-actions>

          <md-card-content>

            <p>
              <span class="md-body-1">From <b>{{ $ctrl.round.duration.start | date: "mediumDate" }}</b> To <b>{{ $ctrl.round.duration.end | date: "mediumDate" }}</b></span>
              <br>
              <span class="md-body-1" ng-show="$ctrl.round.numTracks != 1">{{ $ctrl.round.numTracks }} tracks</span>
              <span class="md-body-1" ng-show="$ctrl.round.numTracks == 1">Just 1 track</span>
              <br>
              <span class="md-body-1">All cart products are worth: {{ $ctrl.round.valueCartProducts | currency }}</span>
            </p>

            <p>
              <span class="md-body-1" ng-show="$ctrl.round.contributions.num != 1">{{ $ctrl.round.contributions.num }} contributions so far</span>
              <span class="md-body-1" ng-show="$ctrl.round.contributions.num == 1">1 contribution so far</span>
              <br>
              <span class="md-body-1">All worth: {{ $ctrl.round.contributions.value | currency }}</span>
            </p>

            <p>
              <span class="md-body-1">Delivery Fee: {{ $ctrl.round.deliveries.fee | currency }}</span>
              <br>
              <span class="md-body-1" ng-show="$ctrl.round.deliveries.numPayments != 1">{{ $ctrl.round.deliveries.numPayments }} payments so far</span>
              <span class="md-body-1" ng-show="$ctrl.round.deliveries.numPayments == 1">1 payment so far</span>
              <br>
              <span class="md-body-1">All worth: {{ $ctrl.round.deliveries.valuePayments | currency }}</span>
            </p>

          </md-card-content>

          <md-card-actions layout-gt-sm="row" layout-align-gt-sm="start center" layout="column" layout-align="start center">
            <md-button class="md-accent" aria-label="Button" ng-href="#/tracks/{{ $ctrl.round.id }}">
              <span>Tracks</span>
            </md-button>
            <md-button ng-disabled="true" class="md-accent" aria-label="Button" ng-href="#/round-contributors/{{ $ctrl.round.id }}">
              <span>Round Contributors</span>
            </md-button>
            <md-button ng-disabled="true" class="md-accent" aria-label="Button" ng-href="#/carts/{{ $ctrl.round.id }}">
              <span>Carts</span>
            </md-button>
            <md-button ng-disabled="true" class="md-accent" aria-label="Button" ng-href="#/contributions/{{ $ctrl.round.id }}">
              <span>Contributions</span>
            </md-button>
            <md-button ng-disabled="true" class="md-accent" aria-label="Button" ng-href="#/delivery-fees/{{ $ctrl.round.id }}">
              <span>Delivery Fees</span>
            </md-button>
          </md-card-actions>

        </md-card>

      </section>

      <div layout="row" layout-align="center end" layout-padding>
        <span class="md-caption">Copyright Â© 2017 Athena Resources Limited. All rights reserved.</span>
      </div>

    </md-content>

  </md-content>
</div>