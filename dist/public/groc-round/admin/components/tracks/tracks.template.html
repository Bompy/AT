<div flex="100" layout="column" layout-align="start stretch" class="screen" ng-cloak>
  <tool-bar-widget title="Tracks"></tool-bar-widget>
  <md-progress-linear class="md-accent" ng-if="$ctrl.progress.getTracks" md-mode="indeterminate"></md-progress-linear>
  <md-content flex layout="row" layout-align="center stretch">

    <div layout="column" layout-align="start stretch" class="no_padding">
      <side-nav-widget context="profile" flex="100" layout="row" layout-align="center stretch" class="no_padding"></side-nav-widget>
    </div>

    <md-button class="md-fab md-fab-bottom-right" ng-href="#/add-edit-track">
      <md-icon aria-label="icon">plus_one</md-icon>
      <md-tooltip md-direction="bottom">Add Track</md-tooltip>
    </md-button>

    <md-content flex-gt-sm="80" flex-sm="90" flex-xs="100">

      <section>

        <md-subheader class="md-no-sticky">Tracks</md-subheader>

        <div ng-hide="$ctrl.tracks.length || $ctrl.progress.getTracks" layout="row" layout-align="center center">
          <h1 class="md-subhead">No Tracks Yet</h1>
        </div>

        <div ng-show="$ctrl.errorMessage" layout="row" layout-align="center center">
          <h1 class="md-subhead">{{ $ctrl.errorMessage }}</h1>
        </div>

        <div ng-show="$ctrl.tracks.length" layout="row" layout-align="start start" layout-wrap layout-padding>

          <md-card ng-repeat="track in $ctrl.tracks track by track.id" class="list-item" flex-gt-sm="30" flex-sm="45" flex-xs="100">

            <md-card-header>
              <md-card-avatar>
                <img class="md-user-avatar" src="/resources/drawable/bg2.jpg">
              </md-card-avatar>
              <md-card-header-text>
                <span class="md-title" ng-show="track.products.num != 1">{{ track.products.num }} Products</span>
                <span class="md-title" ng-show="track.products.num == 1">1 Product</span>
                <span class="md-subhead">Worth {{ track.products.value | currency }}</span>
              </md-card-header-text>
            </md-card-header>

            <md-card-title>
              <md-card-title-text>
                <span class="md-headline pointed" ng-click="$ctrl.route( '/track/' + track.id )">{{ track.trackName }}</span>
                <span class="md-subhead">Updated on {{ track.updatedAt | date }}</span>
              </md-card-title-text>
            </md-card-title>

            <md-card-content>

              <p>
                <span class="md-body-1">Round: <b>{{ track.round.roundName }}</b></span>
              </p>

              <p>
                <span class="md-body-1">Installment value: <b>{{ track.contributions.installmentValue | currency }}</b></span>
                <br>
                <span class="md-body-1">Total value of installments: <b>{{ track.contributions.totalValue | currency }}</b></span>
              </p>

              <p>
                <span class="md-body-1">Admin Fee Percentage: <b>{{ track.adminFeePercentage }} %</b></span>
              </p>

            </md-card-content>

          </md-card>

        </div>

      </section>

      <div layout="row" layout-align="center end" layout-padding>
        <span class="md-caption">Copyright Â© 2017 Athena Resources Limited. All rights reserved.</span>
      </div>

    </md-content>

  </md-content>
</div>