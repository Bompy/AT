var GrocRoundAdminAddEditShopComponent;!function(o){var e=function(){return function(o,e,i,t,n,s,h){var p=this;this.$q=o,this.$routeParams=e,this.$location=i,this.$mdDialog=t,this.ToastService=n,this.DialogService=s,this.ShopsService=h,this.initMembers=function(){p.promises=p.ShopsService.promises,p.progress=p.ShopsService.progress,p.addDetails={shopName:""},p.updateDetails={shopName:""}},this.determineMode=function(){p.$routeParams.shopId?(p.editMode=!0,p.shopId=p.$routeParams.shopId,p.findShopInfo()):p.editMode=!1},this.findShopInfo=function(){p.loading=!0;var o=p.ShopsService.shops.filter(function(o){return p.shopId===o.id});o.length?(p.copyDetails(o[0]),p.loading=!1):p.ShopsService.getShop(p.shopId).then(function(o){p.copyDetails(o)}).catch(function(o){p.errorMessage=o&&o.message?o.message:"Couldn't get shop record"}).finally(function(){p.loading=!1})},this.copyDetails=function(o){p.updateDetails={shopName:o.shopName}},this.addShop=function(){return p.addDetails.shopName?(p.adding=!0,p.ShopsService.addShop(p.addDetails).then(function(o){p.$location.path("/shops")}).finally(function(){p.adding=!1})):p.ToastService.showSimple("Shop name is missing")},this.updateShop=function(){return p.shopId?p.updateDetails.shopName?(p.updating=!0,p.ShopsService.updateShop(p.shopId,p.updateDetails).then(function(o){p.$location.path("/shops")}).finally(function(){p.updating=!1})):p.ToastService.showSimple("Shop name is missing"):p.ToastService.showSimple("Shop ID is missing")},this.deleteShop=function(){if(!p.shopId)return p.ToastService.showSimple("Shop ID is missing");p.deleting=!0,p.DialogService.showConfirm("Delete Shop","Are you sure?",null).then(function(o){return o?p.ShopsService.removeShop(p.shopId):p.$q.reject()}).then(function(o){p.$location.path("/shops")}).finally(function(){p.deleting=!1})},this.initMembers(),this.determineMode()}}();o.Component=e}(GrocRoundAdminAddEditShopComponent||(GrocRoundAdminAddEditShopComponent={}));